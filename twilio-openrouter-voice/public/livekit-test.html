<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LiveKit Library Test</title>
</head>
<body>
    <h1>LiveKit Library Test</h1>
    <div id="output"></div>

    <!-- LiveKit Client Library -->
    <script src="/js/livekit-client.js"></script>

    <script>
        function log(message) {
            const output = document.getElementById('output');
            output.innerHTML += '<p>' + message + '</p>';
            console.log(message);
        }

        // Test immediately
        log('Testing LiveKit library loading...');
        log('typeof window.LiveKit: ' + typeof window.LiveKit);
        log('typeof window.livekit: ' + typeof window.livekit);

        try {
            log('typeof LiveKit: ' + typeof LiveKit);
        } catch (e) {
            log('LiveKit global error: ' + e.message);
        }

        // Test after a delay
        setTimeout(() => {
            log('--- After 1 second delay ---');
            log('typeof window.LiveKit: ' + typeof window.LiveKit);
            log('typeof window.livekit: ' + typeof window.livekit);

            if (window.LiveKit) {
                log('LiveKit.Room: ' + typeof window.LiveKit.Room);
                log('LiveKit.RoomEvent: ' + typeof window.LiveKit.RoomEvent);
                log('LiveKit.Track: ' + typeof window.LiveKit.Track);
                log('SUCCESS: LiveKit library loaded correctly!');
            } else {
                log('ERROR: LiveKit library not found on window object');
            }
        }, 1000);
    </script>
</body>
</html>